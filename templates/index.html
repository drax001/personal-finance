{% extends "base.html" %}
{% block title %}Finance Tracker{% endblock %}
{% block content %}
<div class="row g-4">
  <div class="col-lg-5">
    <div class="card shadow-sm">
      <div class="card-header">Add Transaction</div>
      <div class="card-body">
        <form method="POST">
          {{ form.hidden_tag() }}
          <div class="mb-2">{{ form.t_type.label }} {{ form.t_type(class="form-select") }}</div>
          <div class="mb-2">{{ form.category.label }} {{ form.category(class="form-control") }}</div>
          <div class="mb-2">{{ form.amount.label }} {{ form.amount(class="form-control") }}</div>
          <div class="mb-2">{{ form.currency.label }} {{ form.currency(class="form-control") }}</div>
          <div class="mb-2">{{ form.note.label }} {{ form.note(class="form-control") }}</div>
          {{ form.submit(class="btn btn-primary") }}
        </form>
      </div>
    </div>
  </div>
  <div class="col-lg-7">
    <div class="row text-center mb-3">
      <div class="col"><div class="p-3 bg-white border rounded">Income<br><span class="fs-4 fw-bold">{{ "%.2f"|format(income) }}</span></div></div>
      <div class="col"><div class="p-3 bg-white border rounded">Expense<br><span class="fs-4 fw-bold">{{ "%.2f"|format(expense) }}</span></div></div>
      <div class="col"><div class="p-3 bg-white border rounded">Balance<br><span class="fs-4 fw-bold">{{ "%.2f"|format(balance) }}</span></div></div>
    </div>
    <div class="card shadow-sm">
      <div class="card-header">Recent Transactions</div>
      <ul class="list-group list-group-flush">
        {% for t in items %}
          <li class="list-group-item d-flex justify-content-between align-items-center">
            <div>
              <span class="badge text-bg-{{ 'success' if t.t_type=='income' else 'danger' }}">{{ t.t_type }}</span>
              <strong>{{ t.category }}</strong> — {{ "%.2f"|format(t.amount) }} {{ t.currency }}
              <small class="text-muted"> • {{ t.created_at.strftime("%Y-%m-%d %H:%M") }}</small>
              {% if t.note %}<div class="text-muted small">{{ t.note }}</div>{% endif %}
            </div>
            <form method="POST" action="{{ url_for('delete', tid=t.id) }}">
              <button class="btn btn-sm btn-outline-danger">Delete</button>
            </form>
          </li>
        {% else %}
          <li class="list-group-item">No transactions yet.</li>
        {% endfor %}
      </ul>
    </div>
  </div>
</div>
{% endblock %}
